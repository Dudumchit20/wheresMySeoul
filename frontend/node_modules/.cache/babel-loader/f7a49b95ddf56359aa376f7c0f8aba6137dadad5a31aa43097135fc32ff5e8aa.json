{"ast":null,"code":"import React,{useEffect,useState}from'react';import{GoogleMap,InfoWindow,Marker}from'@react-google-maps/api';import\"./Map.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const containerStyle={width:'100%',height:'100%'};const defaultCenter={lat:37.5665,lng:126.9780};const markerIcons={\"자연\":\"http://maps.google.com/mapfiles/ms/icons/green-dot.png\",\"쇼핑\":\"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\"명소\":\"http://maps.google.com/mapfiles/ms/icons/pink-dot.png\",\"음식\":\"http://maps.google.com/mapfiles/ms/icons/orange-dot.png\",\"관광거리\":\"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\",\"외국인\":\"http://maps.google.com/mapfiles/ms/icons/red-dot.png\",\"문화\":\"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png\"};// Translation dictionary to map filters to DB fields\nlet filterTrans={\"tourStreetKor\":\"관광거리\",\"attractions\":\"명소\",\"entertainment\":\"문화\",\"shoppings\":\"쇼핑\",\"nature\":\"자연\",\"restaurants\":\"음식\",\"tourInformations\":\"외국인\"};const Map=_ref=>{let{allData,gu,currentLat,currentLng}=_ref;const[currentPosition,setCurrentPosition]=useState(defaultCenter);const[activeMarker,setActiveMarker]=useState(null);useEffect(()=>{if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;setCurrentPosition({lat:latitude,lng:longitude});},()=>{console.error(\"Geolocation is not supported or permission denied.\");});}else{console.error(\"Geolocation is not supported by this browser.\");}},[]);useEffect(()=>{console.log(\"지도 확인용 ----------\",allData);},[allData]);useEffect(()=>{console.log(currentLat,currentLng);setCurrentPosition({lat:currentLat,lng:currentLng});},[currentLat,currentLng]);const handleMarkerClick=marker=>{setActiveMarker(marker);};const handleInfoWindowClose=()=>{setActiveMarker(null);};return/*#__PURE__*/_jsxs(GoogleMap,{className:\"map\",mapContainerStyle:containerStyle,center:currentPosition,zoom:13,children:[/*#__PURE__*/_jsx(Marker,{position:currentPosition,title:\"\\uD604\\uC7AC \\uC704\\uCE58\"}),Object.keys(allData).map((originalKey,index)=>{console.log(originalKey);const translatedKey=filterTrans[originalKey];console.log(translatedKey);if(translatedKey&&allData[originalKey]&&allData[originalKey].length>0){return allData[originalKey].map((marker,markerIndex)=>/*#__PURE__*/_jsx(Marker,{position:{lat:parseFloat(marker.latitude),lng:parseFloat(marker.longitude)},icon:markerIcons[translatedKey]||\"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png\",title:marker.name,onClick:()=>handleMarkerClick(marker)},\"\".concat(translatedKey,\"-\").concat(markerIndex)));}return null;}),activeMarker&&/*#__PURE__*/_jsx(InfoWindow,{position:{lat:parseFloat(activeMarker.lat),lng:parseFloat(activeMarker.lng)},onCloseClick:handleInfoWindowClose,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:activeMarker.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC8FC\\uC18C: \",activeMarker.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC804\\uD654\\uBC88\\uD638: \",activeMarker.phoneNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC6F9\\uC0AC\\uC774\\uD2B8: \",activeMarker.website]})]})})]});};export default Map;","map":{"version":3,"names":["React","useEffect","useState","GoogleMap","InfoWindow","Marker","jsx","_jsx","jsxs","_jsxs","containerStyle","width","height","defaultCenter","lat","lng","markerIcons","filterTrans","Map","_ref","allData","gu","currentLat","currentLng","currentPosition","setCurrentPosition","activeMarker","setActiveMarker","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","console","error","log","handleMarkerClick","marker","handleInfoWindowClose","className","mapContainerStyle","center","zoom","children","title","Object","keys","map","originalKey","index","translatedKey","length","markerIndex","parseFloat","icon","name","onClick","concat","onCloseClick","address","phoneNumber","website"],"sources":["/Users/p_kxn_g/Documents/GitHub/wheresMySeoul/frontend/awes/src/recommend/Map.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { GoogleMap, InfoWindow, Marker } from '@react-google-maps/api';\nimport \"./Map.css\";\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\nconst defaultCenter = {\n  lat: 37.5665,\n  lng: 126.9780\n};\n\nconst markerIcons = {\n  \"자연\": \"http://maps.google.com/mapfiles/ms/icons/green-dot.png\",\n  \"쇼핑\": \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\n  \"명소\": \"http://maps.google.com/mapfiles/ms/icons/pink-dot.png\",\n  \"음식\": \"http://maps.google.com/mapfiles/ms/icons/orange-dot.png\",\n  \"관광거리\": \"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\",\n  \"외국인\": \"http://maps.google.com/mapfiles/ms/icons/red-dot.png\",\n  \"문화\": \"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png\"\n};\n\n// Translation dictionary to map filters to DB fields\nlet filterTrans = {\n    \"tourStreetKor\" : \"관광거리\",\n    \"attractions\":\"명소\",\n    \"entertainment\":\"문화\",\n    \"shoppings\":\"쇼핑\",\n    \"nature\":  \"자연\",\n    \"restaurants\":\"음식\",\n    \"tourInformations\":\"외국인\" \n};\n\nconst Map = ({ allData, gu, currentLat, currentLng }) => {\n  const [currentPosition, setCurrentPosition] = useState(defaultCenter);\n  const [activeMarker, setActiveMarker] = useState(null);\n\n  useEffect(() => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const { latitude, longitude } = position.coords;\n        setCurrentPosition({\n          lat: latitude,\n          lng: longitude\n        });\n      }, () => {\n        console.error(\"Geolocation is not supported or permission denied.\");\n      });\n    } else {\n      console.error(\"Geolocation is not supported by this browser.\");\n    }\n  }, []);\n  useEffect(() => {\n    console.log(\"지도 확인용 ----------\", allData);\n  }, [allData]);\n  \n  useEffect(() => {\n    console.log(currentLat, currentLng);\n    setCurrentPosition({\n      lat: currentLat,\n      lng: currentLng\n    });\n  }, [currentLat, currentLng]);\n\n  const handleMarkerClick = (marker) => {\n    setActiveMarker(marker);\n  };\n\n  const handleInfoWindowClose = () => {\n    setActiveMarker(null);\n  };\n\n  return (\n    <GoogleMap\n      className=\"map\"\n      mapContainerStyle={containerStyle}\n      center={currentPosition}\n      zoom={13}\n    >\n      <Marker position={currentPosition} title=\"현재 위치\" />\n\n      {Object.keys(allData).map((originalKey, index) => {\n                console.log(originalKey)\n\n        const translatedKey = filterTrans[originalKey];\n        console.log(translatedKey)\n        if (translatedKey && allData[originalKey] && allData[originalKey].length > 0) {\n          return allData[originalKey].map((marker, markerIndex) => (\n            <Marker\n              key={`${translatedKey}-${markerIndex}`}\n              position={{ lat: parseFloat(marker.latitude), lng: parseFloat(marker.longitude) }}\n              icon={markerIcons[translatedKey] || \"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png\"}\n              title={marker.name}\n              onClick={() => handleMarkerClick(marker)}\n            />\n          ));\n        }\n        return null;\n      })}\n\n      {activeMarker && (\n        <InfoWindow\n          position={{ lat: parseFloat(activeMarker.lat), lng: parseFloat(activeMarker.lng) }}\n          onCloseClick={handleInfoWindowClose}\n        >\n          <div>\n            <h4>{activeMarker.name}</h4>\n            <p>주소: {activeMarker.address}</p>\n            <p>전화번호: {activeMarker.phoneNumber}</p>\n            <p>웹사이트: {activeMarker.website}</p>\n          </div>\n        </InfoWindow>\n      )}\n    </GoogleMap>\n  );\n\n};\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}